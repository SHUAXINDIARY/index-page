---
name: å…¨ç«™ä¸»é¢˜åˆ‡æ¢ç³»ç»Ÿ
overview: åŸºäºç°æœ‰ CSS å˜é‡ä½“ç³»ï¼Œæ„å»ºæ˜æš—æ¨¡å¼ + å¤šé…è‰²ä¸»é¢˜åˆ‡æ¢ç³»ç»Ÿã€‚ç‚¹å‡»å³ä¾§æ  ğŸ¨ å›¾æ ‡å¼¹å‡ºä¸»é¢˜é€‰æ‹©é¢æ¿ï¼Œæ”¯æŒ localStorage æŒä¹…åŒ–å’Œç³»ç»Ÿåå¥½è·Ÿéšã€‚
todos:
  - id: create-theme-hook
    content: åˆ›å»º src/hooks/useTheme.ts ä¸»é¢˜ç®¡ç† Hookï¼ˆæ¨¡å¼/é…è‰²/æŒä¹…åŒ–/ç³»ç»Ÿåå¥½ç›‘å¬ï¼‰
    status: completed
  - id: extend-css-variables
    content: åœ¨ App.css ä¸­æ‰©å±• CSS å˜é‡ä½“ç³»ï¼šæ·»åŠ æ´¾ç”Ÿé€æ˜åº¦å˜é‡ã€dark æ¨¡å¼è¦†ç›–ã€å¤šé…è‰²è¦†ç›–
    status: completed
  - id: create-theme-toggle
    content: åˆ›å»º ThemeToggle ç»„ä»¶ï¼ˆæŒ‰é’® + å¼¹å‡ºé¢æ¿ + åŠ¨ç”»ï¼‰
    status: completed
  - id: integrate-app
    content: åœ¨ App.tsx ä¸­é›†æˆ ThemeToggle æ›¿æ¢åŸæœ‰è£…é¥°å›¾æ ‡
    status: completed
  - id: migrate-hardcoded-colors
    content: å°†å„ç»„ä»¶ CSS ä¸­çš„ç¡¬ç¼–ç é¢œè‰²æ›¿æ¢ä¸º CSS å˜é‡å¼•ç”¨
    status: completed
  - id: add-transition
    content: æ·»åŠ ä¸»é¢˜åˆ‡æ¢çš„å…¨å±€è¿‡æ¸¡åŠ¨ç”»
    status: completed
  - id: update-docs
    content: æ›´æ–° README.md å’Œ CHANGELOG.md è®°å½•ä¸»é¢˜ç³»ç»Ÿ
    status: completed
isProject: false
---

# å…¨ç«™ä¸»é¢˜åˆ‡æ¢ç³»ç»Ÿ

## æ¶æ„è®¾è®¡

```mermaid
graph LR
    ThemeToggle["ThemeToggle ç»„ä»¶"] -->|"ç‚¹å‡» ğŸ¨"| ThemePanel["ThemePanel å¼¹å‡ºé¢æ¿"]
    ThemePanel -->|"é€‰æ‹©ä¸»é¢˜"| ThemeProvider["ThemeProvider Context"]
    ThemeProvider -->|"è®¾ç½® data-theme å±æ€§"| HTMLRoot["document.documentElement"]
    ThemeProvider -->|"æŒä¹…åŒ–"| LocalStorage["localStorage"]
    HTMLRoot -->|"CSS å˜é‡è¦†ç›–"| AllComponents["æ‰€æœ‰ç»„ä»¶"]
```



## ä¸»é¢˜ç»“æ„

æ”¯æŒä¸¤ä¸ªç»´åº¦ï¼š

- **æ¨¡å¼ï¼ˆmodeï¼‰**ï¼š`light` / `dark`
- **é…è‰²ï¼ˆcolorï¼‰**ï¼š`default`ï¼ˆæš–æ£•ï¼‰ / `ocean`ï¼ˆæµ·æ´‹è“ï¼‰ / `forest`ï¼ˆæ£®æ—ç»¿ï¼‰ / `lavender`ï¼ˆè–°è¡£è‰ç´«ï¼‰ / `sunset`ï¼ˆæ—¥è½æ©˜ï¼‰

é€šè¿‡ `data-theme-mode` å’Œ `data-theme-color` ä¸¤ä¸ª HTML å±æ€§æ§åˆ¶ï¼ŒCSS å˜é‡ç”¨å±æ€§é€‰æ‹©å™¨è¦†ç›–ã€‚

## æ–‡ä»¶å˜åŠ¨

### 1. æ–°å»º `src/components/ThemeToggle/` ç»„ä»¶

æŒ‰é¡¹ç›®è§„èŒƒåˆ›å»ºä¸‰ä¸ªæ–‡ä»¶ï¼š

- **ThemeToggle.tsx** - ä¸»é¢˜åˆ‡æ¢æŒ‰é’® + å¼¹å‡ºé¢æ¿
  - ç‚¹å‡» ğŸ¨ å¼¹å‡º/æ”¶èµ·é¢æ¿ï¼ˆä½¿ç”¨ motion åŠ¨ç”»ï¼‰
  - é¢æ¿åˆ†ä¸¤éƒ¨åˆ†ï¼šä¸Šæ–¹ light/dark æ¨¡å¼åˆ‡æ¢ï¼Œä¸‹æ–¹é…è‰²åœ†ç‚¹é€‰æ‹©
  - ç‚¹å‡»å¤–éƒ¨åŒºåŸŸå…³é—­é¢æ¿
  - æ”¯æŒç³»ç»Ÿåå¥½è·Ÿéšï¼ˆauto é€‰é¡¹ï¼‰
- **ThemeToggle.css** - é¢æ¿æ ·å¼
  - é¢æ¿ä»æŒ‰é’®ä¸Šæ–¹å‘ä¸Šå¼¹å‡ºï¼Œæ¯›ç»ç’ƒé£æ ¼ä¸ç°æœ‰å¡ç‰‡ä¸€è‡´
  - é…è‰²é€‰é¡¹ä¸ºå°è‰²å—åœ†ç‚¹ï¼Œhover æ”¾å¤§
- **index.ts** - å¯¼å‡ºå…¥å£

### 2. æ–°å»º `src/hooks/useTheme.ts` - ä¸»é¢˜ç®¡ç† Hook

æ ¸å¿ƒé€»è¾‘ï¼š

```typescript
/** ä¸»é¢˜æ¨¡å¼ */
type ThemeMode = 'light' | 'dark' | 'system';
/** ä¸»é¢˜é…è‰² */
type ThemeColor = 'default' | 'ocean' | 'forest' | 'lavender' | 'sunset';

// - è¯»å– localStorage ç¼“å­˜ï¼Œæ— ç¼“å­˜æ—¶é»˜è®¤ system + default
// - ç›‘å¬ prefers-color-scheme åª’ä½“æŸ¥è¯¢
// - åˆ‡æ¢æ—¶åŒæ—¶æ›´æ–° document.documentElement çš„ data-theme-mode å’Œ data-theme-color
// - å†™å…¥ localStorage æŒä¹…åŒ–
```

### 3. ä¿®æ”¹ [src/App.css](src/App.css) - æ‰©å±• CSS å˜é‡ä½“ç³»

ç°æœ‰ `:root` ä¸‹çš„å˜é‡ä¿æŒä¸å˜ä½œä¸º light + default çš„åŸºçº¿ã€‚æ–°å¢ï¼š

- `[data-theme-mode="dark"]` é€‰æ‹©å™¨è¦†ç›–æ‰€æœ‰é¢œè‰²ç›¸å…³å˜é‡
- `[data-theme-color="ocean"]` / `forest` / `lavender` / `sunset` è¦†ç›–å“ç‰Œè‰²å’Œå¼ºè°ƒè‰²
- dark æ¨¡å¼ä¸‹å„é…è‰²çš„ç»„åˆä¹Ÿéœ€è¦è¦†ç›–ï¼ˆä½¿ç”¨ `[data-theme-mode="dark"][data-theme-color="ocean"]` ç­‰å¤åˆé€‰æ‹©å™¨ï¼‰

æš—è‰²æ¨¡å¼çš„ä¸»è¦å˜é‡æ˜ å°„ï¼š


| å˜é‡                   | Light å€¼                 | Dark å€¼                   |
| -------------------- | ----------------------- | ------------------------ |
| `--color-primary`    | `#4E3F42`               | `#E8E0E0`                |
| `--color-secondary`  | `#7B888E`               | `#9CA3AF`                |
| `--color-bg`         | `#EEEEEE`               | `#1A1A2E`                |
| `--color-card`       | `rgba(255,255,255,0.4)` | `rgba(255,255,255,0.06)` |
| `--color-card-solid` | `#FFFFFF`               | `#242438`                |
| `--color-border`     | `#FFFFFF`               | `rgba(255,255,255,0.1)`  |
| é˜´å½±ç³»åˆ—                 | æš–è‰²è°ƒ                     | æ·±è‰²è°ƒä½å¯¹æ¯”åº¦                  |


### 4. ä¿®æ”¹ [src/App.tsx](src/App.tsx) - æ›¿æ¢è£…é¥°å›¾æ ‡

å°†ç°æœ‰çš„é™æ€ `decorative-icon` div æ›¿æ¢ä¸º `<ThemeToggle />` ç»„ä»¶ï¼š

```tsx
<div className="decorative-items">
  <ThemeToggle />
</div>
```

### 5. ä¿®æ”¹å„ç»„ä»¶ CSS - æ›¿æ¢ç¡¬ç¼–ç é¢œè‰²

å°†ç»„ä»¶ä¸­ä½¿ç”¨ `rgba(78, 63, 66, ...)` å’Œ `rgba(222, 67, 49, ...)` ç­‰ç¡¬ç¼–ç é¢œè‰²æ›¿æ¢ä¸ºåŸºäº CSS å˜é‡çš„æ´¾ç”Ÿå€¼ã€‚æ–°å¢ä»¥ä¸‹ CSS å˜é‡åˆ° `:root`ï¼š

```css
/* æ´¾ç”Ÿçš„é€æ˜åº¦å˜é‡ï¼Œæ–¹ä¾¿å„ç»„ä»¶å¼•ç”¨ */
--color-primary-alpha-005: rgba(78, 63, 66, 0.05);
--color-primary-alpha-008: rgba(78, 63, 66, 0.08);
--color-primary-alpha-010: rgba(78, 63, 66, 0.1);
--color-primary-alpha-020: rgba(78, 63, 66, 0.2);
--color-primary-alpha-030: rgba(78, 63, 66, 0.3);
--color-primary-alpha-040: rgba(78, 63, 66, 0.4);
--color-accent-alpha-008: rgba(222, 67, 49, 0.08);
--color-accent-alpha-020: rgba(222, 67, 49, 0.2);
--color-overlay: rgba(0, 0, 0, 0.95);
--color-text-on-dark: white;
```

è¿™äº›å˜é‡åœ¨ dark æ¨¡å¼å’Œä¸åŒé…è‰²ä¸‹ä¼šè¢«æ­£ç¡®è¦†ç›–ã€‚éœ€è¦ä¿®æ”¹çš„ç»„ä»¶ CSS æ–‡ä»¶ï¼š

- Calendar.cssã€MusicPlayer.cssã€UserCard.cssã€ImageCard.cssã€SocialLinks.cssã€Card.cssã€IframeModal.cssã€RecommendCard.cssã€Tooltip.cssã€Carousel.cssã€WorldMap.css

### 6. è¿‡æ¸¡åŠ¨ç”»

åœ¨ `body` ä¸Šæ·»åŠ å…¨å±€è¿‡æ¸¡ï¼š

```css
body {
  transition: background-color var(--duration-normal) var(--easing-default),
              color var(--duration-normal) var(--easing-default);
}
```

å„å¡ç‰‡ç»„ä»¶çš„ `background`ã€`color`ã€`border-color`ã€`box-shadow` å±æ€§ä¹Ÿæ·»åŠ è¿‡æ¸¡ï¼Œå®ç°å¹³æ»‘åˆ‡æ¢æ•ˆæœã€‚

## ThemeToggle é¢æ¿äº¤äº’è®¾è®¡

é¢æ¿ä» ğŸ¨ æŒ‰é’®**ä¸Šæ–¹å¼¹å‡º**ï¼Œå†…å®¹ç»“æ„ï¼š

```
+---------------------------+
|  â˜€ï¸  Light  |  ğŸŒ™ Dark  |   <-- æ¨¡å¼åˆ‡æ¢ï¼ˆä¸¤æ®µå¼æŒ‰é’®ï¼‰
|  ğŸ’»  è·Ÿéšç³»ç»Ÿ             |   <-- system é€‰é¡¹
+---------------------------+
|  é…è‰²                      |
|  ğŸŸ¤  ğŸ”µ  ğŸŸ¢  ğŸŸ£  ğŸŸ      |   <-- 5 ä¸ªè‰²å—åœ†ç‚¹
+---------------------------+
```

- ä½¿ç”¨ motion çš„ `AnimatePresence` åšå¼¹å‡º/æ”¶èµ·åŠ¨ç”»ï¼ˆscale + opacityï¼‰
- å½“å‰é€‰ä¸­çš„æ¨¡å¼å’Œé…è‰²æœ‰é«˜äº®æŒ‡ç¤º
- ç‚¹å‡»é¢æ¿å¤–éƒ¨è‡ªåŠ¨å…³é—­

